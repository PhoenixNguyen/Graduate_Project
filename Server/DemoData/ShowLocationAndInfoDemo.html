<%-- 
    Document   : index
    Created on : Jan 5, 2014, 3:28:43 PM
    Author     : HP
--%>

<%@page language="java" contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib prefix="s" uri="/struts-tags" %>

<%

    request.setCharacterEncoding("UTF-8");
%>
<!DOCTYPE html>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>View map detail</title>
        <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false">
        </script>

        <script type="text/javascript">
            var arr = new Array();
            function initialize() {
                var i;
                var Locations = [
                    {
                        mXCoordinates: 48.856614,
                        mYCoordinates: 2.3522219000000177,
                        mMaDoiTuong: 'Paris',
                        mDoiTuong: '25.5',
                        mTinhThanh: 'Non-Commodity',
                        mDiaChi: 'Paris',
                        mDienThoai: 'Paris',
                        mFax: 'Paris'
                    },
                    {
                        lat: 55.7512419,
                        lon: 37.6184217,
                        address: 'Moscow',
                        gval: '11.5',
                        aType: 'Non-Commodity',
                        title: 'Moscow',
                        descr: 'Moscow Airport'
                    },
                    {
                        lat: -9.481553000000002,
                        lon: 147.190242,
                        address: 'Port Moresby',
                        gval: '1',
                        aType: 'Oil',
                        title: 'Papua New Guinea',
                        descr: 'Papua New Guinea 123123123'
                    },
                    {
                        lat: 20.5200,
                        lon: 77.7500,
                        address: 'Indore',
                        gval: '1',
                        aType: 'Oil',
                        title: 'Indore, India',
                        descr: 'Airport India'
                    }
                ];

                var myOptions = {
                    zoom: 2,
                    center: new google.maps.LatLng(51.9000, 8.4731),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                var map = new google.maps.Map(document.getElementById("googleMap"), myOptions);

                var infowindow = new google.maps.InfoWindow({
                    content: ''
                });

                for (i = 0; i < Locations.length; i++) {
                    size = 15;
                    var img = new google.maps.MarkerImage('images/marker.jpg',
                            new google.maps.Size(size, 2 * size),
                            new google.maps.Point(0, 0),
                            new google.maps.Point(size / 2, size / 2)
                            );

                    var marker = new google.maps.Marker({
                        map: map,
                        title: Locations[i].title,
                        position: new google.maps.LatLng(Locations[i].lat, Locations[i].lon),
                        icon: img
                    });

                    bindInfoWindow(marker, map, infowindow, "<p>" + Locations[i].descr + "</p>", Locations[i].title);

                }

            }

            function bindInfoWindow(marker, map, infowindow, html, Ltitle) {
                google.maps.event.addListener(marker, 'mouseover', function() {
                    infowindow.setContent(html);
                    infowindow.open(map, marker);

                });
                google.maps.event.addListener(marker, 'mouseout', function() {
                    infowindow.close();

                });
            }
            google.maps.event.addDomListener(window, 'load', initialize);
        </script>
    </head>

    <body>
        <div id="googleMap" style="width:1000px;height:580px;"></div>

        <p>
            <s:iterator value="listCustomer">
                [<s:property value="mDoiTuong"/>, <s:property value="mXCoordinates"/>, <s:property value="mYCoordinates"/>, 4], <br/>

            </s:iterator>

            <br/>

            <s:property value="%{#attr.id_customer}"/>
        </p>
    </body>
</html>